<h1 class="h1">Internet of Things (IoT )</h1>
 <br>
<h2 class="h2">What is an Internet of Things (IoT)</h2>
<p>Let's us look closely at our mobile device which contains GPS Tracking, Mobile Gyroscope, Adaptive brightness, Voice detection, Face detection etc. These components have their own individual features, but what about if these all communicate with each other to provide a better environment? For example, the phone brightness is adjusted based on my GPS location or my direction.</p>
<p>Connecting everyday things embedded with electronics, software, and sensors to Internet enabling to collect and exchange data without human interaction callight as the Internet of Things (IoT).</p>
<p>The term "Things" in the Internet of Things refers to anything and everything in day to day life which is accessed or connected through the internet.</p>
<img src="https://static.javatpoint.com/tutorial/iot/images/what-is-an-internet-of-things.png" alt="IoT Introdoction" />
<p>IoT is an advanced automation and analytics system which deals with artificial intelligence, sensor, networking, electronic, cloud messaging etc. to deliver complete systems for the product or services. The system created by IoT has greater transparency, control, and performance. </p>
<p>As we have a platform such as a cloud that contains all the data through which we connect all the things around us. For example, a house, where we can connect our home appliances such as air conditioner, light, etc. through each other and all these things are managed at the same platform. Since we have a platform, we can connect our car, track its fuel meter, speed level, and also track the location of the car.</p>
<img src="https://static.javatpoint.com/tutorial/iot/images/what-is-an-internet-of-things2.png" alt="IoT Introdoction" />
<p>If there is a common platform where all these things can connect to each other would be great because based on my preference, I can set the room temperature. For example, if I love the room temperature to to be set at 25 or 26-degree Celsius when I reach back home from my office, then according to my car location, my AC would start before 10 minutes I arrive at home. This can be done through the Internet of Things (IoT).</p>
<h2 class="h2">How does Internet of Thing (IoT) Work?</h2>
<p>The working of IoT is different for different IoT echo system (architecture). However, the key concept of there working are similar. The entire working process of IoT starts with the device themselves, such as smartphones, digital watches, electronic appliances, which securely communicate with the IoT platform. The platforms collect and analyze the data from all multiple devices and platforms and transfer the most valuable data with applications to devices.</p>
<img src="https://static.javatpoint.com/tutorial/iot/images/what-is-an-internet-of-things3.png" alt="IoT Introdoction" />
<h2 class="h2">Features of IOT</h2>
<p>The most important features of IoT on which it works are connectivity, analyzing, integrating, active engagement, and many more. Some of them are listed below:</p>
<p><strong>Connectivity:</strong> Connectivity refers to establish a proper connection between all the things of IoT to IoT platform it may be server or cloud. After connecting the IoT devices, it needs a high speed messaging between the devices and cloud to enable reliable, secure and bi-directional communication.</p>
<p><strong>Analyzing:</strong> After connecting all the relevant things, it comes to real-time analyzing the data collected and use them to build effective business intelligence. If we have a good insight into data gathered from all these things, then we call our system has a smart system.</p>
<p><strong>Integrating:</strong> IoT integrating the various models to improve the user experience as well. </p>
<p><strong>Artificial Intelligence:</strong> IoT makes things smart and enhances life through the use of data. For example, if we have a coffee machine whose beans have going to end, then the coffee machine itself order the coffee beans of your choice from the retailer.</p>
<p><strong>Sensing:</strong> The sensor devices used in IoT technologies detect and measure any change in the environment and report on their status. IoT technology brings passive networks to active networks. Without sensors, there could not hold an effective or true IoT environment.</p>
<p><strong>Active Engagement:</strong> IoT makes the connected technology, product, or services to active engagement between each other. </p>
<p><strong>Endpoint Management:</strong> It is important to be the endpoint management of all the IoT system otherwise, it makes the complete failure of the system. For example, if a coffee machine itself order the coffee beans when it goes to end but what happens when it orders the beans from a retailer and we are not present at home for a few days, it leads to the failure of the IoT system. So, there must be a need for endpoint management.</p>

**Here are the links for more detailed tutorials**
<hr/>
<div class="responsivediv">
<div class="col-3">
<ul class="points">
<li><a href="iot-internet-of-things">IoT Tutorial</a></li>
<li><a href="iot-advantage-and-disadvantage">Advantage &amp; Disadvantage</a></li>
<li><a href="iot-embedded-devices">Embedded Devices and System</a></li>
<li><a href="iot-ecosystem">IoT Ecosystem</a></li>
<li><a href="iot-decision-framework">IoT Decision Framework</a></li>
</ul>
<p><strong>Architecture &amp; Domains</strong></p>
<ul class="points">
<li><a href="iot-architecture-models">Solution Architecture Models</a></li>
<li><a href="iot-energy-domain">IoT - Energy Domain</a></li>
<li><a href="iot-biometric-domain">IoT - Biometric Domain</a></li>
<li><a href="iot-security-camera-and-door-unlock-system">Security Camera and Door Unlock System</a></li>
<li><a href="iot-smart-home-and-smart-city">Smart Home and City</a></li>
<li><a href="iot-smart-agriculture-domain">IoT - Smart Agriculture</a></li>
<li><a href="iot-healthcare">IoT - Healthcare</a></li>
<li><a href="iot-transportation">IoT - Transportation</a></li>
<li><a href="iot-transforming-businesses">Transforming Businesses</a></li>
</ul>
</div>
<div class="col-3">
<p><strong>IoT Devices</strong></p>
<ul class="points">
<li><a href="iot-smart-objects">Smarts Objects</a></li>
<li><a href="iot-devices">IoT Devices</a></li>
<li><a href="major-iot-boards-in-market">Major IoT Boards in Market</a></li>
</ul>
<p><strong>IoT Platforms</strong></p>
<ul class="points">
<li><a href="iot-platform">IoT Platform</a></li>
<li><a href="iot-thingworx-platform">ThingWorx Platform</a></li>
</ul>
<p><strong>Communication Protocols</strong></p>
<ul class="points">
<li><a href="iot-data-link-communication-protocol">Data Link</a></li>
<li><a href="iot-network-layer-protocols">Network Layer</a></li>
<li><a href="iot-session-layer-protocols">Session Layer</a></li>
</ul>
</div>


**Assessment**

**Turning light on and off using NodeMCU ESP8266 with wifi and Bluetooth**
 <be>
   
 **Materials**
  <br>
 ESP8266
  <br>
 Breadboard
  <br>
 Resistor
  <br>
 Bluetooth Module
  <br>
 Light Bulb
  <br>
 Jumper Wires
  <br
    
 **platforms**
 <br>
 IDE
  <br>
 HTML
  <br>
 JAVASCRIPT
  <br>
 CSS
  <br>
 Arduino Bluetooth Controller
  <br>

Before we start our actual assessment, Let's introduce the components we used. In recent years, the ESP8266 has emerged as a pivotal component in Internet of Things (IoT) and WiFi-related ventures. As a cost-effective WiFi module, the ESP8266 can be ingeniously programmed to operate as an autonomous web server, opening up a myriad of possibilities for innovative projects.

A web server, in essence, serves as a repository where web pages are stored, processed, and subsequently delivered to web clients. These clients, typically web browsers on computers and smartphones, engage in communication with web servers through the Hypertext Transfer Protocol (HTTP).

To elaborate, when a client initiates a conversation, it sends an HTTP request for a specific web page to the server. In turn, the server responds by furnishing the content of the requested web page or an error message, such as the well-known 404 Error if the page cannot be found.

The ESP8266 boasts the capability not only to connect to an existing WiFi network and function as a web server but also to establish its own network, allowing direct connectivity for other devices. This versatility arises from the ESP8266's ability to operate in three distinct modes: Station (STA) mode, Soft Access Point (AP) mode, or both simultaneously.

In Station (STA) mode, the ESP8266 seamlessly integrates with an existing WiFi network, obtaining an IP address from the router. This IP address facilitates the setup of a web server, enabling the ESP8266 to serve web pages to all connected devices on the established WiFi network.

On the other hand, in Access Point (AP) mode, the ESP8266 assumes the role of a hub, creating its own WiFi network and serving as a central point for one or more stations. This mode, Soft Access Point (soft-AP), imitates a WiFi router, though without a wired network interface. It can connect with up to five stations simultaneously, creating a new WiFi network with a designated SSID (network name) and IP address.

With a foundational understanding of web server fundamentals and the ESP8266's versatile operating modes, the next step involves practical application. For instance, Light to the ESP8266 allows for WiFi-based control.

To implement this, place the NodeMCU (a popular ESP8266 development board) on a breadboard, ensuring each side aligns with different sections of the board. Proceed to connect Light to digital GPIO pins D3, utilizing a 220Î© current-limiting resistor. This configuration sets the stage for controlling real light through WiFi.

The operational concept involves controlling connected devices by visiting specific URLs. When a IP address, is entered into a web browser, it triggers an HTTP request (GET request) to the ESP8266. The ESP8266 interprets the request, recognizes the user's intent to turn on the light, executes the action, and sends a dynamic webpage to the browser, reflecting the light's status as "on."

To delve deeper into the implementation of an ESP8266 Web Server in Access Point (AP) mode and the provision of web pages to connected clients, the following project showcases the configuration of the ESP8266 Web Server in this specific mode. This demonstration elucidates the intricate yet accessible nature of deploying the ESP8266 for practical and interactive applications in the realm of IoT and WiFi-based projects.
 
 The web interface is implemented using the ESP8266WebServer library, which is part of the ESP8266 Arduino core. Here's overview of the working principle:

**WiFi Connection:**

<img style="float: center;" width=700 src="image/i.png">

This part of the code connects the ESP8266 to the Wi-Fi network using the provided SSID and password. It waits until the connection is established.

**Web Server Setup:**

<br>
<img style="float: center;" width=700 src="image/i1.png">
<br>
The ESP8266WebServer instance is created, listening on port 80, which is the default port for HTTP.
 <br
  
**Handling Requests**

<br>

<img style="float: center;" width=700 src="image/i2.png">
<br>
The code sets up three routes: "/" for the root, "/on" for turning the light on, and "/off" for turning the light off. These routes are configured to execute specific functions when accessed.
 <br>
 
*HTML Response**

<br>
<br>
<img style="float: center;" width=700 src="image/i3.png">
<br>
The handleRoot function generates an HTML page with two buttons ("Turn On light" and "Turn Off light") and sends it as a response when the root ("/") route is accessed.
 <br>
 <br>
 
**Form Submission**

<br>
<br>
The two buttons are part of HTML forms. When a button is clicked, a POST request is sent to the corresponding route ("/on" or "/off").
 <br>
 <br>
 
**Server-Side Handling**

<br>
<img style="float: center;" width=700 src="image/i4.png">
<br
 <br>
The handleCommand function is called when a POST request is received on the "/on" or "/off" route. It processes the command and controls the light accordingly.
 <br>
 <br>
 
**Light Control**

<br>
<br>
The light control is performed inside the handle command function:

<br>
<img style="float: center;" width=700 src="image/i5.png">
<br>
Depending on the received command ("on" or "off"), the digital output pin connected to the light (D3) is set to HIGH or LOW.
 <br>
 <br>
 
**Redirect and Response**

<br>
After processing the command, a redirect response is sent back to the client:
<br>
<img style="float: center;" width=700 src="image/i6.png">
<br>
This redirects the client to the root ("/") route, and the updated HTML page with the current light state is displayed.
 <br>
 <br
  
**Bluetooth Integration**

<br>
<img style="float: center;" width=700 src="image/i7.png">
This part of the code checks if there are incoming characters available from the Bluetooth serial connection (Bluetooth serial).
If the Wi-Fi is not working, the ESP8266 will still be able to receive Bluetooth commands and control the light accordingly.
 <br>
 <br>
 
**Wifi case**

<br>
<img style="float: center;" width=700 src="image/iotf.jpg">
<br>
 <br><div><br><video width=100% height=56.25% controls><source src="image/iots.mp4" type="video/mp4">
</video></div>
Integrating Bluetooth functionality into the system is crucial for providing a reliable and alternative means of controlling the light when the Wi-Fi connection is down. Here's why it's important:
 <br>
 <br>
 
**Redundancy and Reliability**

<br>
By incorporating Bluetooth, the system gains redundancy in communication methods. In the event of a Wi-Fi connection failure, Bluetooth serves as a reliable backup, ensuring continuous control over the light.
 <br>
 
**Uninterrupted Operation**

Users can still manage and control the light even if the primary Wi-Fi network is unavailable. This is especially important for critical applications where uninterrupted operation is essential.
 <br>
 
**User Convenience**

Bluetooth integration enhances user convenience by allowing seamless control through a secondary interface. Users don't need to rely solely on the web interface and can switch to Bluetooth effortlessly when needed.
 <br>
 
**Fallback Mechanism**

The system gracefully falls back to Bluetooth control when Wi-Fi connectivity is lost. This fallback mechanism prevents a complete loss of functionality and maintains user access to essential features.
 <br
  
**Enhanced User Experience**

Users may not even notice a connectivity issue when controlling the light via Bluetooth. The system redirects web interface users to the root page, providing a consistent and user-friendly experience.
 <br>
 
**Versatility Across Environments**

In scenarios where Wi-Fi signals are unreliable or when deploying the system in environments with intermittent connectivity, Bluetooth support ensures the system remains operational.
 <br>
 
**Extended Use Cases**

Bluetooth integration opens up new use cases, such as controlling the light from a mobile app or a Bluetooth-enlight device, offering flexibility beyond traditional web-based control.

In conclusion, integrating Bluetooth capability ensures the robustness and continuity of the system, allowing users to maintain control over the light even during Wi-Fi downtimes. This enhances overall system reliability, user satisfaction, and versatility across different operational scenarios.
 <br>
 
**Bluetooth case**

<br>
First, download the Arduino Bluetooth Controller from the app store
<br>
<br>
<img style="float: center;" height = 900 width=700 src="image/bf.jpg">
<br>
<br>
Then open it and click terminal as follows
<br>
<br>
<img style="float: center;" height = 600 width=700 src="image/bs.jpg">
<br>
<br>
Finally, Write a command to control the light
<br>
<br>
<img style="float: center;" height = 600 width=700 src="image/bt.jpg">
   <br>
   <br>
Here is the Demo
<br>
 <br>
<video width="640" height="360" controls>
    <source src="image/bl.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>
 <br>
 <br>
Here is the code

    #include <ESP8266WiFi.h>
    #include <ESP8266WebServer.h>
    #include <SoftwareSerial.h>

    const char* ssid = "Your wifi name";
    const char* password = " your wifi password";

    ESP8266WebServer server(80);
    SoftwareSerial bluetoothSerial(D6, D7); // RX, TX

    const int LightPin = D3; // Pin to which the Light is connected

    void setupBluetooth() {
      bluetoothSerial.begin(9600);
    }
    void setup() {
      Serial.begin(9600);
      setupBluetooth();

      // Connect to Wi-Fi
      WiFi.begin(ssid, password);
      
      // Wait for connection
      while (WiFi.status() != WL_CONNECTED) {
        delay(1000);
        Serial.print(".");
      }

      // Print the IP address
      Serial.println();
      Serial.print("Connected to ");
      Serial.println(ssid);
      Serial.print("IP address: ");
      Serial.println(WiFi.localIP());

      pinMode(LightPin, OUTPUT);

      // Set up server routes
      server.on("/", HTTP_GET, handleRoot);
      server.on("/on", HTTP_POST, [](){ handleCommand("on"); });
      server.on("/off", HTTP_POST, [](){ handleCommand("off"); });
      server.begin();
    }

    void loop() {
      server.handleClient();

      if (bluetoothSerial.available() > 0) {
        char command = bluetoothSerial.read();

        if (command == '0') {
          digitalWrite(LightPin, HIGH); // Turn on Light
        } else if (command == '1') {
          digitalWrite(LightPin, LOW); // Turn off Light
        }
      }
    }

    void handleRoot() {
      String html = "<html><head><style>";
      html += "body { margin: 0; font-family: Arial, sans-serif; }";
      html += "h1 { text-align: center; padding: 20px; background-color: #333; color: #fff; margin: 0; font-size: 60px; }";
      html += "form { text-align: center; margin: 20px; }";
      html += "input#on { padding: 10px; font-size: 50px; margin: 5px; background-color: red; color: white; }";
      html += "input#off { padding: 10px; font-size: 50px; margin: 5px; background-color: black; color: white; }";
      html += "</style></head><body>";
      html += "<h1>Light Control</h1>";
      html += "<form action='/on' method='post'><input id='on' type='submit' value='Turn On Light'></form>";
      html += "<form action='/off' method='post'><input id='off' type='submit' value='Turn Off Light'></form>";
      html += "</body></html>";
      server.send(200, "text/html", html);
    }

    void handleCommand(String command) {
      if (command == "on") {
        digitalWrite(LightPin, LOW); // Turn on Light
      } else if (command == "off") {
        digitalWrite(LightPin, HIGH); // Turn off Light
      }

      server.sendHeader("Location", "/");
      server.send(303);
    }


**Thingspeak**

[Official Website](https://thingspeak.com/)
 <br>
ThingSpeak is an Internet of Things (IoT) platform that enables users to collect, analyze, visualize, and act on data from IoT devices. It provides an easy-to-use interface for managing and analyzing data streams, making it a popular choice for IoT applications.
First log in to the official website.
To create your channel, Click on channel.
<img style="float: center;" width=700 src="image/ths.jpg">
<img style="float: center;" width=700 src="image/ths1.jpg">
<img style="float: center;" width=700 src="image/ths2.jpg">

 Here are some of the applications.
  <br>
  
**Private View:**

Overview: In ThingSpeak, a private view refers to the ability to configure your channel's visibility. Private views restrict access to the channel's data, requiring authentication for users to view or interact with it.
Channel Privacy: Users can set a channel to be private, making it accessible only to those with the appropriate API key. This adds a layer of security, preventing unauthorized access to sensitive data.
Limited Visibility: Private views ensure that the channel's data is not publicly accessible without the necessary credentials.
 <br>
 
**Public View:**

Overview: Public views in ThingSpeak allow users to share their channel's data with a wider audience. This is useful for scenarios where open access to data is desired.
Public Channel: When a channel is set to public, its data is accessible without authentication. This is suitable for cases where the information is intended for a broader audience.
Sharing URL: ThingSpeak provides a public URL for public channels, allowing users to easily share and embed their data visualizations.
<img style="float: center;" width=700 src="image/ths3.jpg">
 <br>
  
**Channel Settings:**

 <br>
Overview: Channel settings in ThingSpeak provide users with control over various configurations related to their data channels.
Field Configuration: Users can define and customize fields within a channel, specifying the type of data they will store (e.g., temperature, humidity).
Timezone Settings: Channels can be configured to display data in a specific timezone, ensuring accurate timestamp representation.
Metadata: Additional information, such as channel descriptions, can be added to provide context for collaborators and viewers.
 <br
  
**Sharing:**

Overview: ThingSpeak facilitates collaboration by allowing users to share access to their channels with others.
Collaborative Access: Users can add collaborators to their channels, specifying whether collaborators have read-only or read-write access.
Access Control: Sharing is done through email invitations, and collaborators need a ThingSpeak account to access the shared channel.
<img style="float: center;" width=700 src="image/ths4.jpg">
 <br
  
**API Keys:**

Overview: API keys in ThingSpeak are essential for authentication and authorization when interacting with channels programmatically.
Creation: Users can generate API keys associated with their accounts. Different keys may have different permissions (e.g., read-only, read-write).
Secure Interaction: API keys ensure that only authorized applications or devices can read from or write to a channel.
<img style="float: center;" width=700 src="image/ths6.jpg">
 <br>
 
**Data Import / Export:**

Overview: ThingSpeak supports versatile methods for importing and exporting data to and from channels.
Data Import: Users can send data to their channels using protocols like HTTP, MQTT, or ThingSpeak's REST API. This is typically done by IoT devices or sensors.
Data Export: Reading data from ThingSpeak channels can be done using the Read API. Additionally, MATLAB analysis allows users to perform advanced computations within the platform.
Integration: ThingSpeak integrates with other platforms and services, allowing users to export data for further analysis or visualization.
<img style="float: center;" width=700 src="image/ths7.jpg">
 <br
  
Here is the Arduino code

    #include <ESP8266WiFi.h>

    String apiKey = "677C1G8GRK58UT1V"; // write your "Write API key"
    const char* ssid = ""; // write your "wifi name"
    const char* password = ""; // write your "wifi password"
    const char* server = "api.thingspeak.com";
    WiFiClient client;

    //for NodeMCU
    const int trigPin = D6;
    const int echoPin = D7;
    // defines variables
    long duration;
    int distance;

    void setup() 
    {
      Serial.begin(9600);
      Serial.println("Serial Begin");
      pinMode(trigPin, OUTPUT); 
      pinMode(echoPin, INPUT); 
      WiFi.begin(ssid, password);
      Serial.println();
      Serial.print("Connecting to ");
      Serial.println(ssid);
            
      while (WiFi.status() != WL_CONNECTED)
      {
        delay(500);
        Serial.print(".");
      }
        Serial.println("");
        Serial.println("WiFi connected");
    }

    void loop() 
    {
      ultra();
      delay(1000);
        if (client.connect(server,80))
        {
          fwd_to_Thingspeak();
        }
        client.stop();
        Serial.println("Waiting");
        delay(1000);
    }

    void ultra()
    {
      // Clears the trigPin
      digitalWrite(trigPin, LOW);
      delayMicroseconds(2);
      digitalWrite(trigPin, HIGH);
      delayMicroseconds(10);
      digitalWrite(trigPin, LOW);
      
      duration = pulseIn(echoPin, HIGH) ;
      distance= duration*0.034/2;
      Serial.println("Distance =" + String(distance) + " cm");
    }

    void fwd_to_Thingspeak()
    {
      String postStr = apiKey;
      postStr +="&field1=";
      postStr += String(distance);  // ultrasonic data
      postStr += "\r\n\r\n";
              
      client.print("POST /update HTTP/1.1\n");
      client.print("Host: api.thingspeak.com\n");
      client.print("Connection: close\n");
      client.print("X-THINGSPEAKAPIKEY: "+apiKey+"\n");
      client.print("Content-Type: application/x-www-form-urlencoded\n");
      client.print("Content-Length: ");
      client.print(postStr.length());
      client.print("\n\n");
      client.print(postStr);
              
      Serial.println("Send data to thingspeak: ");
      Serial.print("Content-Length: ");
      Serial.print(postStr.length());
      Serial.print(" Field-1: ");
      Serial.print(distance);  // ultrasonic data
      Serial.println(" data send");            
    }

[Source](https://github.com/itsbhupendrasingh/Distance-Measurement-Ultrasonic-Thingspeak)
 <br>
  
Demo in Arduino serial monitor and Thingspeak


<video width="640" height="360" controls>
    <source src="image/thsd1.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>

<video width="640" height="360" controls>
    <source src="image/thsd.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>

**References**

 <br>
[Nextmaker](https://www.nexmaker.com/doc/10IOT/NodeMCUESP8266_ALiYun.html)
 <br>
[JavaTpoints](https://www.javatpoint.com/iot-internet-of-things)
